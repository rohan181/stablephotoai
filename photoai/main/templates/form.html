<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Black Theme Example</title>
  <style>
    body {
      background-color: #1c1c1c;
      font-family: sans-serif;
      font-size: 16px;
      color: #f2f2f2;
    }
    
    .custom-container {
      background-color: #2b2b2b;
      border-radius: 10px;
      padding: 20px;
      margin: 0 auto;
      margin-top: 50px;
      max-width: 400px;
    }
    
    .custom-button {
      background-color: #ff8c00;
      color: #f2f2f2;
      border: none;
      border-radius: 5px;
      padding: 10px 20px;
      font-size: 16px;
      transition: background-color 0.3s ease;
      cursor: pointer;
    }
    
    .custom-button:hover {
      background-color: #f2f2f2;
      color: #ff8c00;
    }
    
    label {
      display: block;
      margin-bottom: 10px;
      font-weight: bold;
      color: #f2f2f2;
    }
    
    input[type="number"], select {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: none;
      margin-bottom: 20px;
      background-color: #2b2b2b;
      color: #f2f2f2;
    }
    
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }


    .loading-animation {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(255, 255, 255, 0.7);
  text-align: center;
  font-size: 24px;
  font-weight: bold;
  z-index: 9999;
}

.loading-animation.show {
  display: block;
}
    
    input[type="number"] {
      -moz-appearance: textfield;
    }
  </style>

  <script>
const url = "https://stablediffusionapi.com/api/v4/dreambooth";


var modelId = '{{ modelid }}';
     
    var user =  '{{ user }}';     



    

    
    
  




    function handleSubmit(event) {
      event.preventDefault(); // prevent form submission
      const imageNumber = document.getElementById("imageNumber").value;
      const imageType = document.getElementById("imageType").value;


      
   
    const dressColor = document.getElementById('dressColor').value;
    const lighting = document.getElementById('lighting').value;
    const windCondition = document.getElementById('windCondition').value;
    const locationType = document.getElementById('locationType').value;
    const place = document.getElementById('place').value;
    const time = document.getElementById('time').value;
    const emotion = document.getElementById('emotion').value;

      const url = "https://stablediffusionapi.com/api/v4/dreambooth";
    var modelId = '{{ modelid }}';
    var user =  '{{ user }}';
    console.log(modelId);

    if (time === "night") {
      var string5 = ""+dressColor +" " + imageType+ + "," + lighting + "," + windCondition + "," + locationType + "," + place + "," + "," + emotion;
      var string4 = "abir_rohan1811 person,night photography,city night,neon light,"+string5 +"half body,detail face ,road light,street night,detailed, sharp, detailed face, magazine, photo, canon, nikon, focus, award winning photo,reminiscent of the works of Mario Testino, 35mm, F/2.8, insanely detailed and intricate, character, hypermaximalist, elegant, ornate, hyper realistic, super detailed, trending on flickr,masterpiece,fresh background,full body, best quality, high resolution, 8K UHD , HDR, bloom, sun light, raytracing , detailed shadows, intricate tree shadow, bokeh, depth of field, film photography, film grain, glare, (wind:0.8), detailed hair, beautiful face, ultra detailed eyes, cinematic lighting, (hyperdetailed:1.15), outdoors,happy face,ultra-realistic,clear facial features,natural features,captured with a phase one 35mm lens,f/ 3.2,agfa vista film ,film grain light,global illumination,intricate detail,wide shot,--upbeta --ar 4:5 --s 750 --q 2,natural lighting,RTX, professionally color graded, professional photography,fashion, high fashion, haute couture, add a touch of happiness to the scene dof, V4"
 
  console.log("Night condition is true.");
  // Add more code or actions specific to the "night" condition
} else {


  var string1 = "abir_rohan1811 person,ed:1.15)";
var string2 =","+ imageType + ",";
var string3 = "abir_rohan1811 person,ed:1.15)" +  string2 + ",detailed, sharp, detailed face, magazine, photo, canon, nikon, focus, award winning photo,reminiscent of the works of Mario Testino, 35mm, F/2.8, insanely detailed and intricate, character, hypermaximalist, elegant, ornate, hyper realistic, super detailed, trending on flickr,masterpiece,fresh background,full body, best quality, high resolution, 8K UHD , HDR, bloom, sun light, raytracing , detailed shadows, intricate tree shadow, bokeh, depth of field, film photography, film grain, glare, (wind:0.8), detailed hair, beautiful face, ultra detailed eyes, cinematic lighting, (hyperdetailed:1.15), outdoors,happy face,ultra-realistic,clear facial features,natural features,captured with a phase one 35mm lens,f/ 3.2,agfa vista film ,film grain light,global illumination,intricate detail,wide shot,--upbeta --ar 4:5 --s 750 --q 2,natural lighting,RTX, professionally color graded, professional photography,fashion, high fashion, haute couture, add a touch of happiness to the scene dof, V4";
var string5 = ","+time +","+ dressColor +" "+ imageType+ "," + lighting + "," + windCondition + "," + locationType + "," + place + "," + "," + emotion;
var string4 = "abir_rohan1811 person,ed:1.15)" +  string5 + "detailed, sharp, detailed face, magazine, photo, canon, nikon, focus, award winning photo,reminiscent of the works of Mario Testino, 35mm, F/2.8, insanely detailed and intricate, character, hypermaximalist, elegant, ornate, hyper realistic, super detailed, trending on flickr,masterpiece,fresh background,full body, best quality, high resolution, 8K UHD , HDR, bloom, sun light, raytracing , detailed shadows, intricate tree shadow, bokeh, depth of field, film photography, film grain, glare, (wind:0.8), detailed hair, beautiful face, ultra detailed eyes, cinematic lighting, (hyperdetailed:1.15), outdoors,happy face,ultra-realistic,clear facial features,natural features,captured with a phase one 35mm lens,f/ 3.2,agfa vista film ,film grain light,global illumination,intricate detail,wide shot,--upbeta --ar 4:5 --s 750 --q 2,natural lighting,RTX, professionally color graded, professional photography,fashion, high fashion, haute couture, add a touch of happiness to the scene dof, V4"
}




    
console.log(string4)

// Concatenate the strings
var concatenatedString = string4 ;

    const payload = JSON.stringify({
  key: "KhwsDivKGA4dhHDlbZQcVeGojvjTjIMNCebIV6iImfvgWPHpyW0E8ZWAjK33",
  
  model_id: modelId,
  prompt: concatenatedString,
  negative_prompt: "(worst quality:2.00), full body,(low quality:2.00), (normal quality:2.00), low-res,deformed face,(deformed iris, deformed pupils, semi-realistic, CGI, 3D, render, sketch, cartoon, drawing, anime:1.4), text, close up, cropped, out of frame, worst quality, low quality, JPEG artifacts, ugly, duplicate, morbid, mutilated, extra fingers, mutated hands, poorly drawn hands, poorly drawn face, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, extra limbs, cloned face, disfigured, gross proportions, malformed limbs, missing arms, missing legs, extra arms, extra legs, fused fingers, too many fingers, long neck,blurry background,dslr,portrait,dark face,dark eye,make up,fat face, easynegative,flat face,red skin,bad skin, wrinkles, pustules, skin spots, acne, skin blemishes, age spots, ugly, duplicate, morbid, mutilated, bad hands, cartoon, low poly, text, signature, watermark, username, ramparts,3d, midriff, nipples, canvas frame,bad art,weird colors,cloned face,Photoshop, video game, tiling, cross-eye, body out of frame, 3d render,gross body proportions,long neck, noise, artifacts, dithering,sad face,dark shadow face, weird nose,weird teeth, close up,overexposed",
  height: "640",
  samples: "1",
  num_inference_steps: "50",
  safety_checker: "no",
  enhance_prompt: "no",
  seed: null,
  guidance_scale: 7.5,
  multi_lingual: "no",
  panorama: "no",
  self_attention: "no",
  upscale: "no",
  embeddings_model: null,
  lora_model: null,
  scheduler: "UniPCMultistepScheduler",
  webhook: null,
  track_id: null
});


const sendPostRequest = async () => {
  try {
    const response = await fetch(url, {
      method: 'POST',
      body: payload,
      headers: {
        'Content-Type': 'application/json'
      }
    });
    
    const data = await response.json();
    console.log(data)
    const dataa = {
      "user": user,
  "modelid": modelId,
  "image": data.output
  // Other data properties
};
    

fetch(`/useritemstore`, {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    'X-CSRFToken': '{{ csrf_token }}',
  },
  body: JSON.stringify(dataa),
})
  .then((response) => response.json())
  .then((responseData) => {
    console.log("Response:", responseData);
  })
  .catch((error) => {
    console.error("Error:", error);
  });
    
    return data;
    
  } 
  catch (error) {
    console.error('Error:', error);
  }
};








const sendMultipleRequests = async (imageNumber) => {
  const loadingAnimation = document.querySelector('.loading-animation');
  loadingAnimation.classList.add('show');

  const requestPromises = [];
  for (let i = 0; i < imageNumber; i++) {
    requestPromises.push(sendPostRequest());
  }
  await Promise.all(requestPromises);

  loadingAnimation.classList.remove('show');

  window.location.href = "{% url 'photoview' %}";
 
};
   
sendMultipleRequests(imageNumber);










      console.log(`Number of Images: ${imageNumber}, Image Type: ${imageType}`);
    }
  </script>
</head>
<body>

    <div class="loading-animation">Loading...</div>
  <div class="custom-container">
    <h2 style="color:#f2f2f2;"></h2>
    <form onsubmit="handleSubmit(event)">
      <div class="form-group">
        <label for="imageNumber">Number of Images:</label>
        <input type="number" id="imageNumber" placeholder="Enter number">
      </div>

      


      <div class="form-group">
        <label for="imageType">Outfit Type:</label>
        <select id="imageType">
          <option value="formal dress">FORMAL</option>
          <option value="casual dress">CASUAL</option>
          <option value="suit dress">SUIT</option>
          <option value="semi formal dress">semiformal</option>
          <option value="t-shirt dress">Tshirt</option>
          <option value="party dress">Party dress</option>
        </select>
      </div>

      <div class="form-group">
        <label for="dressColor">Outfit Color:</label>
        <select id="dressColor">
          <option value="red">Red</option>
          <option value="blue">Blue</option>
          <option value="green">Green</option>
          <option value="yellow">Yellow</option>
          <option value="black">Black</option>
          <option value="white">White</option>
          <option value="pink">Pink</option>
          <option value="purple">Purple</option>
          <option value="orange">Orange</option>
          <option value="gray">Gray</option>
        </select>
      </div>




      <div class="form-group">
        <label for="place">Place:</label>
        <select id="place">
          <option value="plain">Plain Background</option>
          <option value="beach">Beach Background</option>
          <option value="forest">Forest Background</option>
          <option value="city">City Background</option>
          <option value="mountain">Mountain Background</option>
          <option value="desert">Desert Background</option>
          <option value="countryside">Countryside Background</option>
        </select>
      </div>
    
      <!-- Time -->
      <div class="form-group">
        <label for="time">Time:</label>
        <select id="time">
          <option value="daytime">Daytime</option>
          <option value="night">Night</option>
          <option value="sunset time">Sunset</option>
          <option value="dawn time">Dawn</option>
          <option value="dusk time">Dusk</option>
          <option value="midnight ,star">Midnight</option>
        </select>
      </div>
    
      <!-- Lighting -->
      <div class="form-group">
        <label for="lighting">Lighting:</label>
        <select id="lighting">
          <option value="natural">Natural Light</option>
          <option value="studio">Studio Light</option>
          <option value="ambient">Ambient Light</option>
          <option value="flash">Flash Light</option>
          <option value="backlight">Backlight</option>
          <option value="candle">Candle Light</option>
          <option value="dusk">Dusk Light</option>
          <option value="overhead">Overhead Light</option>
        </select>
      </div>
    
      <!-- Emotion -->
      <div class="form-group">
        <label for="emotion">Emotion:</label>
        <select id="emotion">
          <option value="happy">Happy</option>
          <option value="angry">Angry</option>
          <option value="sad">Sad</option>
          <option value="excited">Excited</option>
          <option value="calm">Calm</option>
          <option value="fearful">Fearful</option>
          <option value="surprised">Surprised</option>
        </select>
      </div>


      


      <div class="form-group">
        <label for="lighting">Lighting:</label>
        <select id="lighting">
          <option value="natural">Natural Light</option>
          <option value="studio">Studio Light</option>
          <option value="ambient">Ambient Light</option>
          <option value="flash">Flash Light</option>
          <option value="backlight">Backlight</option>
          <option value="candle">Candle Light</option>
          <option value="dusk">Dusk Light</option>
          <option value="overhead">Overhead Light</option>
        </select>
      </div>


      <div class="form-group">
        <label for="windCondition">Wind Condition:</label>
        <select id="windCondition">
          <option value="calm">Calm</option>
          <option value="breezy">Breezy</option>
          <option value="windy">Windy</option>
          <option value="gusty">Gusty</option>
          <option value="stormy">Stormy</option>
          <option value="hurricane">Hurricane</option>
          <option value="tornado">Tornado</option>
          <option value="gale-force">Gale Force</option>
        </select>
      </div>


      <div class="form-group">
        <label for="locationType">Location Type:</label>
        <select id="locationType">
          <option value="city">City</option>
          <option value="suburb">Suburb</option>
          <option value="rural">Rural</option>
          <option value="beach">Beach</option>
          <option value="mountain">Mountain</option>
          <option value="forest">Forest</option>
          <option value="desert">Desert</option>
          <option value="countryside">Countryside</option>
        </select>
      </div>


      <div class="form-group">
        <label for="ownPrompt">Own Prompt:</label>
        <input type="text" id="ownPrompt" placeholder="Enter your own prompt">
      </div>
      
      
      
      
      
      <button type="submit" class="custom-button">Submit</button>
    </form>
  </div>
</body>
</html>